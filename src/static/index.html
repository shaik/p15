<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="p15.css">
        <script type="text/javascript">
        function init() {
           console.log('init');
           getBoardREST();     
        }

        function getGridElement() {
            return document.querySelector ("#grid");
        }
        function render (arr){
            let e = getGridElement();
            let h='';
            for (let i=0; i<16; i++){
                const y = Math.floor(i / 4);
                const x = i % 4;
                let cssClass = arr[i] == 0 ? "blank-item" : "grid-item";
                let s = '<div class="' + cssClass + '" onclick="move(' + x + ',' + y + ')">' + arr[i] + '</div>';
                h += s;
            }
            e.innerHTML = h;
        }

        function getBoardREST() {
            fetch('rest/getboard')
                .then(response => response.json())
                .then(data => render(data));
        }
        function move(x,y){
            let url = '/rest/move/'+x+'/'+y;
            fetch(url)
                .then(response => response.json())
                .then(data => render(data));


        }
        </script>

    </head>
    
    </script>

<body onload="init()">

<h1>P15</h1>

<div id="grid" class="grid-container"></div>
<br/>

</body>
</html>
